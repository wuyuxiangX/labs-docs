---
title: OAuth2 API Reference
description: API endpoints related to OAuth2 authorization code flow
---

This document describes the API endpoints related to OAuth2 authorization code flow.

**Base URL**: `https://app.mindos.com/gate/lab`

---

## Authorization Entry (Frontend Redirect)

For web applications, we recommend using the standard OAuth2 redirect approach to initiate authorization.

```
GET https://go.second.me/oauth/
```

### Description

Redirect the user to this URL for login and authorization. After the user completes authorization, they will be redirected back to your `redirect_uri` with the authorization code in the URL.

### Request Parameters

Pass via URL Query parameters:

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| client_id | string | Yes | Application's Client ID |
| redirect_uri | string | Yes | Callback URL after authorization, must match app configuration |
| response_type | string | Yes | Fixed value `code` |
| state | string | Yes | CSRF protection parameter, use a random string |

### URL Example

```
https://go.second.me/oauth/?client_id=your_client_id&redirect_uri=https://your-app.com/callback&response_type=code&state=abc123
```

### Callback Response

On successful authorization, the user is redirected to:

```
https://your-app.com/callback?code=lba_ac_xxxxx...&state=abc123
```

| Parameter | Type | Description |
|-----------|------|-------------|
| code | string | Authorization code, valid for 5 minutes |
| state | string | The state parameter returned as-is |

On authorization failure:

```
https://your-app.com/callback?error=access_denied&error_description=User%20denied%20access&state=abc123
```

---

## User Authorization (Server-side Endpoint)

Server-side endpoint to initiate OAuth2 authorization request and obtain an authorization code. Suitable for scenarios where you already have the user's login session.

```
POST /api/oauth/authorize/external
```

### Authentication

Requires user login status (Bearer Token).

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| clientId | string | Yes | Application's Client ID |
| redirectUri | string | Yes | Callback URL after authorization, must match app configuration |
| scope | string[] | Yes | List of requested permissions |
| state | string | No | CSRF protection parameter, returned as-is |

### Request Example

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/oauth/authorize/external" \
  -H "Authorization: Bearer <user_token>" \
  -H "Content-Type: application/json" \
  -d '{
    "clientId": "your_client_id",
    "redirectUri": "https://your-app.com/callback",
    "scope": ["user.info", "chat"],
    "state": "abc123"
  }'
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "code": "lba_ac_xxxxx...",
    "state": "abc123"
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| code | string | Authorization code, valid for 5 minutes |
| state | string | The state parameter returned as-is |

### Error Codes

| Error Code | Description |
|------------|-------------|
| oauth2.application.not_found | Application not found |
| oauth2.redirect_uri.mismatch | Redirect URI does not match |
| oauth2.scope.invalid | Invalid scope |

---

## Exchange Code for Token

Exchange authorization code for Access Token and Refresh Token.

```
POST /api/oauth/token/code
```

### Authentication

No authentication required (public endpoint).

### Request Format

`Content-Type: application/x-www-form-urlencoded`

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| grant_type | string | Yes | Fixed value `authorization_code` |
| code | string | Yes | Authorization code from previous step |
| redirect_uri | string | Yes | Must match the value in authorization request |
| client_id | string | Yes | Application's Client ID |
| client_secret | string | Yes | Application's Client Secret |

### Request Example

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/oauth/token/code" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=authorization_code" \
  -d "code=lba_ac_xxxxx..." \
  -d "redirect_uri=https://your-app.com/callback" \
  -d "client_id=your_client_id" \
  -d "client_secret=your_client_secret"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "accessToken": "lba_at_xxxxx...",
    "refreshToken": "lba_rt_xxxxx...",
    "tokenType": "Bearer",
    "expiresIn": 7200,
    "scope": ["user.info", "chat"]
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| accessToken | string | Access token, valid for 2 hours |
| refreshToken | string | Refresh token, valid for 30 days |
| tokenType | string | Token type, fixed as `Bearer` |
| expiresIn | number | Access Token validity period (seconds) |
| scope | string[] | List of granted permissions |

### Error Codes

| Error Code | Description |
|------------|-------------|
| oauth2.grant_type.invalid | Invalid grant_type |
| oauth2.code.invalid | Invalid authorization code |
| oauth2.code.expired | Authorization code expired |
| oauth2.code.used | Authorization code already used |
| oauth2.redirect_uri.mismatch | Redirect URI does not match |
| oauth2.client.secret_mismatch | Client Secret does not match |

---

## Refresh Token

Use Refresh Token to obtain a new Access Token.

```
POST /api/oauth/token/refresh
```

### Authentication

No authentication required (public endpoint).

### Request Format

`Content-Type: application/x-www-form-urlencoded`

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| grant_type | string | Yes | Fixed value `refresh_token` |
| refresh_token | string | Yes | Previously obtained Refresh Token |
| client_id | string | Yes | Application's Client ID |
| client_secret | string | Yes | Application's Client Secret |

### Request Example

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/oauth/token/refresh" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=refresh_token" \
  -d "refresh_token=lba_rt_xxxxx..." \
  -d "client_id=your_client_id" \
  -d "client_secret=your_client_secret"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "accessToken": "lba_at_new_xxxxx...",
    "refreshToken": "lba_rt_new_xxxxx...",
    "tokenType": "Bearer",
    "expiresIn": 7200,
    "scope": ["user.info", "chat"]
  }
}
```

> **Note**: Each refresh generates a new Refresh Token, and the old Refresh Token becomes invalid (Token Rotation).

### Error Codes

| Error Code | Description |
|------------|-------------|
| oauth2.grant_type.invalid | Invalid grant_type |
| oauth2.refresh_token.invalid | Invalid Refresh Token |
| oauth2.refresh_token.expired | Refresh Token expired |
| oauth2.refresh_token.revoked | Refresh Token revoked |
| oauth2.client.secret_mismatch | Client Secret does not match |

---

## Common Error Response Format

All API errors follow a unified response format:

```json
{
  "code": 400,
  "message": "Error description",
  "subCode": "oauth2.xxx.xxx"
}
```

| Field | Type | Description |
|-------|------|-------------|
| code | number | HTTP status code |
| message | string | Human-readable error description |
| subCode | string | Machine-readable error code |
