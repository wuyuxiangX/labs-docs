---
title: SecondMe API Reference
description: SecondMe API provides user information access and AI chat functionality
---

SecondMe API provides user information access and AI chat functionality.

**Base URL**: `https://app.mindos.com/gate/lab`

---

## Get User Info

Get authorized user's basic information.

```
GET /api/secondme/user/info
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`user.info`

### Request Example

```bash
curl -X GET "https://app.mindos.com/gate/lab/api/secondme/user/info" \
  -H "Authorization: Bearer lba_ak_your_api_key"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "userId": "12345678",
    "name": "Username",
    "email": "user@example.com",
    "avatar": "https://cdn.example.com/avatar.jpg",
    "bio": "Personal bio",
    "selfIntroduction": "Self introduction content",
    "profileCompleteness": 85,
    "route": "username"
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| userId | string | User ID |
| name | string | User's name |
| email | string | User's email |
| avatar | string | Avatar URL |
| bio | string | Personal bio |
| selfIntroduction | string | Self introduction |
| profileCompleteness | number | Profile completeness (0-100) |
| route | string | User's profile route |

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing user.info permission |

---

## Get User Shades

Get user's interest tags (only returns tags with public content).

```
GET /api/secondme/user/shades
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`user.info.shades`

### Request Example

```bash
curl -X GET "https://app.mindos.com/gate/lab/api/secondme/user/shades" \
  -H "Authorization: Bearer lba_ak_your_api_key"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "shades": [
      {
        "id": 123,
        "shadeName": "Tech Enthusiast",
        "shadeIcon": "https://cdn.example.com/icon.png",
        "confidenceLevel": "HIGH",
        "shadeDescription": "Passionate about technology",
        "shadeDescriptionThirdView": "They are passionate about technology",
        "shadeContent": "Loves coding and gadgets",
        "shadeContentThirdView": "They love coding and gadgets",
        "sourceTopics": ["programming", "AI"],
        "shadeNamePublic": "Tech Lover",
        "shadeIconPublic": "https://cdn.example.com/public-icon.png",
        "confidenceLevelPublic": "HIGH",
        "shadeDescriptionPublic": "Tech enthusiast",
        "shadeDescriptionThirdViewPublic": "A tech enthusiast",
        "shadeContentPublic": "Enjoys technology",
        "shadeContentThirdViewPublic": "They enjoy technology",
        "sourceTopicsPublic": ["tech"],
        "hasPublicContent": true
      }
    ]
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| shades | array | List of interest tags |
| shades[].id | number | Tag ID |
| shades[].shadeName | string | Tag name |
| shades[].shadeIcon | string | Tag icon URL |
| shades[].confidenceLevel | string | Confidence level: `VERY_HIGH`, `HIGH`, `MEDIUM`, `LOW`, `VERY_LOW` |
| shades[].shadeDescription | string | Tag description |
| shades[].shadeDescriptionThirdView | string | Third-person description |
| shades[].shadeContent | string | Tag content |
| shades[].shadeContentThirdView | string | Third-person content |
| shades[].sourceTopics | array | Source topics |
| shades[].shadeNamePublic | string | Public tag name |
| shades[].shadeIconPublic | string | Public icon URL |
| shades[].confidenceLevelPublic | string | Public confidence level |
| shades[].shadeDescriptionPublic | string | Public description |
| shades[].shadeDescriptionThirdViewPublic | string | Public third-person description |
| shades[].shadeContentPublic | string | Public content |
| shades[].shadeContentThirdViewPublic | string | Public third-person content |
| shades[].sourceTopicsPublic | array | Public source topics |
| shades[].hasPublicContent | boolean | Whether has public content |

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing user.info.shades permission |

---

## Get User Soft Memories

Get user's soft memory data (personal knowledge base) with pagination and search support.

```
GET /api/secondme/user/softmemory
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`user.info.softmemory`

### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| keyword | string | No | Search keyword to filter memories |
| pageNo | integer | No | Page number (default: 1, min: 1) |
| pageSize | integer | No | Page size (default: 20, max: 100) |

### Request Example

```bash
curl -X GET "https://app.mindos.com/gate/lab/api/secondme/user/softmemory?keyword=hobby&pageNo=1&pageSize=20" \
  -H "Authorization: Bearer lba_ak_your_api_key"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": 456,
        "factObject": "Hobbies",
        "factContent": "Enjoys reading science fiction novels",
        "createTime": 1705315800000,
        "updateTime": 1705315800000
      },
      {
        "id": 457,
        "factObject": "Daily Routine",
        "factContent": "Wakes up at 7 AM every day",
        "createTime": 1704873600000,
        "updateTime": 1704873600000
      }
    ],
    "total": 100
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| list | array | List of soft memories |
| list[].id | number | Soft memory ID |
| list[].factObject | string | Fact object/category |
| list[].factContent | string | Fact content |
| list[].createTime | number | Creation time (milliseconds timestamp) |
| list[].updateTime | number | Update time (milliseconds timestamp) |
| total | number | Total count |

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing user.info.softmemory permission |

---

## Add Note

Create a note or memory. Supports two types: text notes and link notes.

```
POST /api/secondme/note/add
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`note.add`

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| content | string | Yes for TEXT type | Note content (max 50000 characters) |
| title | string | No | Note title (max 200 characters) |
| urls | string[] | Yes for LINK type | URL list (max 10 URLs) |
| memoryType | string | No | Note type: `TEXT` (default) or `LINK` |

### Request Examples

**Text Note:**

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/secondme/note/add" \
  -H "Authorization: Bearer lba_ak_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "Learned about Python async programming today",
    "title": "Study Notes",
    "memoryType": "TEXT"
  }'
```

**Link Note:**

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/secondme/note/add" \
  -H "Authorization: Bearer lba_ak_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": ["https://example.com/article"],
    "title": "Interesting Article",
    "memoryType": "LINK"
  }'
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "noteId": 12345
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| noteId | number | Created note ID |

### Error Codes

| Error Code | Description |
|------------|-------------|
| auth.scope.missing | Missing note.add permission |
| note.content.required | TEXT type notes must provide content |
| note.urls.required | LINK type notes must provide urls |

---

## Text-to-Speech (TTS)

Convert text to speech audio and return a public URL for the audio file.

```
POST /api/secondme/tts/generate
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`voice`

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| text | string | Yes | Text to convert, max 10000 characters |
| emotion | string | No | Emotion: `happy`/`sad`/`angry`/`fearful`/`disgusted`/`surprised`/`calm`/`fluent` (default) |

> **Note**: Voice ID is automatically retrieved from user info. Users must set up their voice in SecondMe before using the TTS feature.

### Request Example

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/secondme/tts/generate" \
  -H "Authorization: Bearer lba_ak_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "Hello, this is a test speech",
    "emotion": "fluent"
  }'
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "url": "https://cdn.example.com/tts/audio_12345.mp3",
    "durationMs": 2500,
    "sampleRate": 24000,
    "format": "mp3"
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| url | string | Audio file URL (public read, permanently valid) |
| durationMs | number | Audio duration in milliseconds |
| sampleRate | number | Sample rate (Hz) |
| format | string | Audio format |

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing voice permission |
| tts.text.too_long | Text exceeds 10000 character limit |
| tts.voice_id.not_set | User has not set up voice |

---

## Streaming Chat

Have streaming conversations as the user's AI avatar.

```
POST /api/secondme/chat/stream
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`chat`

### Request Headers

| Header | Required | Description |
|--------|----------|-------------|
| Authorization | Yes | Bearer Token |
| Content-Type | Yes | application/json |
| X-App-Id | No | Application ID, defaults to `general` |

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| message | string | Yes | User message content |
| sessionId | string | No | Session ID, auto-generated if not provided |
| appId | string | No | Application ID, takes priority over Header |
| systemPrompt | string | No | System prompt, only effective on first request of new session |
| receiverUserId | number | No | Receiver user ID (reserved field) |

### Request Example

```bash
curl -X POST "https://app.mindos.com/gate/lab/api/secondme/chat/stream" \
  -H "Authorization: Bearer lba_ak_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Hello, introduce yourself",
    "systemPrompt": "Please reply in a friendly tone"
  }'
```

### Response

Response type is `text/event-stream` (Server-Sent Events).

**First message for new session:**

```
event: session
data: {"sessionId": "labs_sess_a1b2c3d4e5f6"}

```

**Chat content stream:**

```
data: {"choices": [{"delta": {"content": "Hello"}}]}

data: {"choices": [{"delta": {"content": "! I am"}}]}

data: {"choices": [{"delta": {"content": " your AI avatar"}}]}

data: [DONE]
```

### Stream Data Format

| Event Type | Description |
|------------|-------------|
| session | Returns session ID when new session is created |
| data | Incremental chat content |
| [DONE] | End of stream marker |

### Handling Streaming Response Example (Python)

```python
import requests

response = requests.post(
    "https://app.mindos.com/gate/lab/api/secondme/chat/stream",
    headers={
        "Authorization": "Bearer lba_ak_xxx",
        "Content-Type": "application/json"
    },
    json={"message": "Hello"},
    stream=True
)

for line in response.iter_lines():
    if line:
        line = line.decode('utf-8')
        if line.startswith('data: '):
            data = line[6:]
            if data == '[DONE]':
                break
            print(data)
```

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing chat permission |
| secondme.user.invalid_id | Invalid user ID |
| secondme.stream.error | Streaming response error |

---

## Get Session List

Get user's chat session list.

```
GET /api/secondme/chat/session/list
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`chat`

### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| appId | string | No | Filter by application ID |

### Request Example

```bash
curl -X GET "https://app.mindos.com/gate/lab/api/secondme/chat/session/list?appId=general" \
  -H "Authorization: Bearer lba_ak_your_api_key"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "sessions": [
      {
        "sessionId": "labs_sess_a1b2c3d4",
        "appId": "general",
        "lastMessage": "Hello, introduce yourself...",
        "lastUpdateTime": "2024-01-20T15:30:00Z",
        "messageCount": 10
      },
      {
        "sessionId": "labs_sess_e5f6g7h8",
        "appId": "general",
        "lastMessage": "What's the weather today?",
        "lastUpdateTime": "2024-01-19T10:00:00Z",
        "messageCount": 5
      }
    ]
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| sessions | array | Session list, sorted by last update time (descending) |
| sessions[].sessionId | string | Session ID |
| sessions[].appId | string | Application ID |
| sessions[].lastMessage | string | Last message preview (truncated to 50 chars) |
| sessions[].lastUpdateTime | string | Last update time (ISO 8601) |
| sessions[].messageCount | number | Message count |

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing chat permission |

---

## Get Session Messages

Get message history for a specific session.

```
GET /api/secondme/chat/session/messages
```

### Authentication

Requires OAuth2 Token or API Key.

### Required Permissions

`chat`

### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| sessionId | string | Yes | Session ID |

### Request Example

```bash
curl -X GET "https://app.mindos.com/gate/lab/api/secondme/chat/session/messages?sessionId=labs_sess_a1b2c3d4" \
  -H "Authorization: Bearer lba_ak_your_api_key"
```

### Response

**Success (200)**

```json
{
  "code": 0,
  "data": {
    "sessionId": "labs_sess_a1b2c3d4",
    "messages": [
      {
        "messageId": "msg_001",
        "role": "system",
        "content": "Please reply in a friendly tone",
        "senderUserId": 12345,
        "receiverUserId": null,
        "createTime": "2024-01-20T15:00:00Z"
      },
      {
        "messageId": "msg_002",
        "role": "user",
        "content": "Hello, introduce yourself",
        "senderUserId": 12345,
        "receiverUserId": null,
        "createTime": "2024-01-20T15:00:05Z"
      },
      {
        "messageId": "msg_003",
        "role": "assistant",
        "content": "Hello! I am your AI avatar...",
        "senderUserId": 12345,
        "receiverUserId": null,
        "createTime": "2024-01-20T15:00:10Z"
      }
    ]
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| sessionId | string | Session ID |
| messages | array | Message list, sorted by creation time (ascending) |
| messages[].messageId | string | Message ID |
| messages[].role | string | Role: `system`/`user`/`assistant` |
| messages[].content | string | Message content |
| messages[].senderUserId | number | Sender user ID |
| messages[].receiverUserId | number | Receiver user ID (reserved) |
| messages[].createTime | string | Creation time (ISO 8601) |

### Error Codes

| Error Code | Description |
|------------|-------------|
| apikey.permission.denied | Missing chat permission |
| secondme.session.unauthorized | Not authorized to access this session |

> **Note**: If sessionId does not exist, the API will return success (code=0) with an empty messages array.

---

## Common Response Format

### Success Response

```json
{
  "code": 0,
  "data": { ... }
}
```

### Error Response

```json
{
  "code": 403,
  "message": "Missing required permission",
  "subCode": "apikey.permission.denied"
}
```

### Authentication Failed Response

When API Key or Token is invalid:

```json
{
  "detail": "需要认证"
}
```
